#  The AI wont build new buildings by itself. This event and the next one are meant
#  to give the AI access to those buildings at a resonable and realistic rate.
#  The conditions and modifiers are trying to replicate the decision making of building 
#  banks and universities. For instance, if the AI is investing lots of research points
#  into banking tech, it has higher chances of building banks, if it's spending very little
#  on education it has less chances of building universtities. 
#
#  It's by no means perfect, but if you let a game run for a while and change to other countries
#  they will have a realistic distribution of Banks and Universities in their provinces.
#
# TO DO: Stop the AI from building where the terrain wont allow. Thankfully that's rare and low impact.

## Event so the AI also builds universities
province_event = {

	id = 6200
    title = "AIEVENT"
	desc = "AIEVENT"

	trigger = {
        owner = { money = 50000
			      ai = yes }
    }

	mean_time_to_happen =  {

		months = 1500

		modifier = { factor = 0.2                                       #Higher chance of choosing the capital
                     is_capital = yes }
        modifier = { factor = 2                                         #Lower chance of choosing a colony
                    is_colonial = yes }
        modifier = { factor = 1.5
                    is_overseas = yes }

		modifier = { factor = 0.5                                    	#Higher chance if investing high on education
                     education_spending = 1 }
        modifier = { factor = 0.6                                       
                     education_spending = 0.9 }                     
        modifier = { factor = 0.7 
                     education_spending = 0.8 }

        modifier = { factor = 5                                         #Lower chance if investing low on education
                    NOT = { education_spending = 0.3 }}
        modifier = { factor = 10
                    NOT = { education_spending = 0.15 }}

        modifier = { factor = 0.8                                    	#Higher chance if hoarding money
                    owner = { money = 100000 }}                    
        modifier = { factor = 0.7
                    owner = { money = 300000 }}
        modifier = { factor = 0.6
                    owner = { money = 500000 }}
        modifier = { factor = 0.5
                    owner = { money = 1000000 }}	

		modifier = { factor = 5                                         #Lower chance if the life rating is low
                     NOT =  { life_rating = 10 }}
        modifier = { factor = 4   								
                     NOT =  { life_rating = 15 }}
        modifier = { factor = 3   
                     NOT =  { life_rating = 20 }}
        
        modifier = { factor = 0.7                                       #Higher chance if province has other economic buildings
                    has_building = infrastructure }

        modifier = { factor = 0.3                                       #Bigger chance to upgrade rather than building new one
                    has_building = university }

        modifier = { factor = 0.8                                       #Increase chance if the AI is reasearching university tech        
                    positivism = 1 }                                    
        modifier = { factor = 0.8                                      
                    functionalism = 1 }                            
        modifier = { factor = 0.8                                       
                    biologism = 1 }                              
        modifier = { factor = 0.7                                       
                    social_science = 1 }
        modifier = { factor = 0.7                                       
                    social_alienation = 1 }
    }

	option = {
		name = "AIEVENT" 
		university = +1
        owner = { treasury = -10000 }

		random_pop = {                                       #Paying workers
			limit = { strata = poor	}				  
			money = 500       		  	                     #I took this idea from  u/Bearhobag's tax refund script
		}								                     #This way, the money does not go to waste and gets injected back into the economy
		random_pop = {
			limit = { strata = poor	}	
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = middle	}
			money = 1000
		}
		random_pop = {
			limit = { strata = middle }
			money = 1000
		}
		random_pop = {
			limit = { strata = rich }
			money = 1000
		}
		random_pop = {
			limit = { strata = rich }
			money = 1000
		}
	}
}  

## Event so the AI also builds banks
province_event = {

	id = 6201
    title = "AIEVENT"
	desc = "AIEVENT"

	trigger = { 
        owner = { money = 10000
                  NOT = { economic_policy = laissez_faire }
				  ai = yes 
		} 
    }

	mean_time_to_happen =  {

		months = 1500

		modifier = { factor = 0.1                                       #Higher chance of choosing the capital
                     is_capital = yes }
        modifier = { factor = 2                                         #Lower chance of choosing a colony
                    is_colonial = yes }
        modifier = { factor = 1.5
                    is_overseas = yes }

        modifier = { factor = 0.7                                       #Higher chance if investing high on administration
                     administration_spending = 1 }                     
        modifier = { factor = 0.8 
                     administration_spending = 0.9 }
        modifier = { factor = 0.9 
                     administration_spending = 0.8 }

        modifier = { factor = 0.8                                      #Higher chance if hoarding money
                     owner = { money = 100000 }}                     
        modifier = { factor = 0.6
                     owner = { money = 200000 }}
        modifier = { factor = 0.5 
					 owner = { money = 300000 }}

        modifier = { factor = 4                                         #Lower chance if investing low on administration
                    NOT = { administration_spending = 0.3 }}
        modifier = { factor = 8
                    NOT = { administration_spending = 0.15 }}

		modifier = { factor = 0.2										#Higher chance if good RGO
					OR = {	produces = precious_goods
					 		produces = precious_metal }}
		modifier = { factor = 0.6
					OR = {	produces = iron
							produces = coal
							produces = oil
					 		produces = rubber }}
		modifier = { factor = 0.8
					OR = {	produces = sulphur
					 		produces = cotton }}

        modifier = { factor = 3                                         #Lower chance if the life rating is low
                     NOT =  { life_rating = 10 }}
        modifier = { factor = 2   
                     NOT =  { life_rating = 15 }}
        modifier = { factor = 1.5   						
                     NOT =  { life_rating = 20 }}

        modifier = { factor = 0.8                                       #Higher chance if province has other economic buildings
                    has_building = infrastructure }
        modifier = { factor = 0.8                                      
                    has_building = university }
        
        modifier = { factor = 0.7                                       #Increase chance if the AI is reasearching Bank tech        
                    stock_exchange = 1 }                                
        modifier = { factor = 0.7                                       
                    business_banks = 1 }                            
        modifier = { factor = 0.7                                       
                    investment_banks = 1 }                              
        modifier = { factor = 0.7                                       
                    bank_inspection_board = 1 }
        modifier = { factor = 0.7                                       
                    mutual_funds = 1 }     
    }

	option = {
		name = "AIEVENT" 
        owner = { treasury = -3000 }
		bank = +1

		random_pop = {                     #Paying workers
			limit = { strata = poor	}							
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = poor	}
			money = 500
		}
		random_pop = {
			limit = { strata = middle }
			money = 500
		}
		random_pop = {
			limit = { strata = rich }
			money = 500
		}
	}
}

## Abusive Banking Practices
province_event = {
	id = 6202
	title = "EVTNAME6202"
	desc = "EVTDESC6202"

	trigger = {
		has_building = bank
		NOT = { administration_spending = 0.5 }
	}

	mean_time_to_happen = { 
        months = 250
		modifier = { factor = 2
                     administration_spending = 0.7 }      
        modifier = { factor = 4                                     #Lower chance investing high on administration
                     administration_spending = 0.9 }                     
        modifier = { factor = 3 
                     administration_spending = 0.8 }                
    }
    
    option = {
		name = "EVTOPTA6202"
        # Audax Validator "." Ignore_NEXT
        bank = -1
		farmers = { militancy = -2 }
	}
	
	option = {
		name = "EVTOPTB6202"
		farmers = { militancy = 2 }
	}
}

country_event = {                   #A tunned down version of u/Bearhobag's tax refund script.
	id = 6203                       #This should force money to flow back into the economy if the AI is still hoarding too much after the tax hits.
	title = "AIEVENT"               
	desc = "AIEVENT"                #It literally takes money away from the tresuary and inserts back into the poor and middle strata
	picture = "Poor"				#A literal tax refund that will kill any money hoarding.
									
	trigger = {						#I decided to limit this to the AI, I don't want the player to be bothered with it.
		money = 800000				#By all means, the player shoulnd't even notice this happenening at all
        ai = yes			
	}

	mean_time_to_happen = {
		months = 5
		modifier = {
			factor = 0.5
			money = 900000
		}
		modifier = {
			factor = 0.4
			money = 1000000
		}
		modifier = {
			factor = 0.3
			money = 1500000
		}
		modifier = {
			factor = 0.2
			money = 2000000
		}
		modifier = {
			factor = 0.1
			money = 2500000
		}
	}
	option = {
		name = "AIEVENT"
		money = -15000

		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = poor }
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = middle } 
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = middle } 
			money = 1000
		}
		random_pop = {
			limit = { NOT = { cash_reserves = 500 } strata = middle } 
			money = 1000
		}
	}
}